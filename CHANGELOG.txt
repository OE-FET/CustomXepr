
(c) Sam Schott; This work is licensed under a Creative Commons
Attribution-NonCommercial-NoDerivs 2.0 UK: England & Wales License.

%----------- System requirements ----------------------------------------------

REQUIRED:
Linux or macOSX
Python 2.7
Python dependencies
NI-VISA
PyQT4 or PyQt5 (PyQt 5 preferred)

OPTIONAL:
fping   - command line tool for pings with millisecond timeout
Postfix - mail transfer agent for macOSX and Linux, required for email
          notifications

%----------- Release notes ----------------------------------------------------

Bug fixes in v1.6.1:
* Fixed a bug that would cause windows to become unresponsive when CustomXepr
  is started from Spyder or an IPython console without a Qt5 event loop already
  running.

New in v1.6.0:

* Rewrote the Keithley2600 driver from scratch. The driver now supports almost
  all 530 Keithley commands and replicates the nomenclature from Keithley's own
  TSP scripting language. The Keithley 2600 reference manual therefore can be
  used as documentation for the driver.
  Instead of wrapping Keithley commands as a string and writing them to the
  connection, they can now be used directly. Instead of writing
	>>> keithley.write('smua.measure.v()')
	>>> keithley.write('smua.source.levelv = -40')
  one can now use directly:
	>>> keithley.smua.measure.v()
	>>> keithley.smua.source.levelv = -40

* Removed all dependencies on PyQt from Keithley driver. The driver no longer
  emits PyQt signals on state changes such as 'busy' or 'connected'. Instead,
  client programs will have to actively query for the state.

* Minor updates to KeithleyGUI and CustomXepr to reflect changes in the
  Keithley driver.

New in v1.5.0:

* Added config files in '~/.CustomXepr' for every user.

* All CustomXepr settings (email addresses, notification level, etc) are
  persistent between sessions.

* IP address settings are persistent sessions.

* Dark and bright appearances are persistent between sessions.

* Keithley settings can be saved as default.

* New option in CustomXepr Manu bar to switch between dark and light
  appearances.

Bug fixes in v1.5.0:

* Fixed a bug that may have caused CustomXepr to realse too many temperature
  fluctuation warnings.

New in v1.4.4:

* SweepData class for Keithley IV curves updated to support loading of data
  from a previously saved file. This is reflected in the Keithley GUI which
  now includes a "Load data from file" menu item.

Bug fixes in v1.4.4:

* Fixed a bug that would not allow editing of the email address list while a
  job is running.

* Temperature stability after measurement is now given as a rounded figure to
  0.01 K accuracy.

* Improvements to customtune stability when starting far away from well tuned.

* Fixed labeling of comboboxes in ChoseSensorDialog.

* Fixed a bug that would cause a new job to be abborted immediately if "Abort
  job" was pressed previously while CustomXepr was IDLE.

New in v1.4.3:

* Aborts current ESR measurement and suspends all pending jobs if temperature
  is unstable for more than 15 min. The user can prevent this from happening by
  increasing the temperature tolerance value in the GUI.

* Improves speed and stability of tuning routine.

Bug fixes in v1.4.3:

* Fixed a bug that would log a warning (and send an email) every second if the
  temperature tolerance was exceeded once during a measurement. Now, the
  warning is logged only once for every 60 violations (e.g, every minute if the
  temperature is always out of bounds).

* Fixed bug that would prevent emails to be sent if the message contains
  unicode characters.

* Fixed a bug that could cause context menu items in the results display to be
  referenced before their assignment, causing an UnboundLocalError.

Bug fixes in v1.4.2:

* Fixed a bug that would create a new email notification handler each time
  CustomXepr is imported. This would lead to duplicate emails and allow the GUI
  user to only modify the email list of the first handler.

* Fixed repeated notifications when connecting to the Keithley fails.

New in v1.4.1:

* Added buttons for tuning and Q-Value readout to GUI.

* CustomXepr methods now always check if instruments are connected and abort
  gracefully if not.

* CustomXepr can now be run as a standalone app without Spyder. In this case,
  an internal IPython kernel is started for command line interactions. The
  corresponding Jupyter console is run in a separate process with its own Qt
  event loop. This is potentially more stable than running from Spyder.

New in v1.4.0:

* New Dialog "Connection settings" in MercuryGUI allows the user to input the
  the IP address and port of the MercuryiTC.

* New Menu Bar in CustomXeprGUI gives access to actions "Show logs" and
  "About Window", the latter provides a documentation.

* New Dialog "Connection settings" in MercuryGUI allows the user to input the
  the IP address and port of the MercuryiTC.

* New GUI for Keithley SMU. Transfer and output curves can now be recorded
  purely through the GUI, a measurement thread is start each time. After the
  sweep is completed, the results are plotted and the user is given the option
  to save the data. The GUI also provides access to sweep settings such as
  integration time per data point, pulsed measurements, etc.

* DARK THEME: try it out, it looks great :)


New in v1.3.1:

* Automatically detects when MercuryiTC is turned on and connects.

New in v1.3.0:

* The CustomXepr user interface now allows access to some basic setting such as
  a list emails for notifications, logging level at which emails are sent, etc.

* Generally improved GUI layout and user interface to make often used settings
  user accessible without coding

* Changed directory for log files to '~/.CustomXepr/LOG_FILES'. This path is
  always writable and more reliable to find than the user's python folder. This
  also prevents log files from different users or machines from coexisting in
  the same folder if the Python folder is shared via Dropbox.

* Future version might save user settings to '~/.CustomXepr', following typical
  programming convention.

* Errors in the Qt event loop (e.g., functions that are executed when pressing
  a button) are now forwarded to the Python console. This should help identify
  the reasons for some crashes.

* Corrected some spelling mistakes in the documentation.

New in v1.2.2:

* Introduced automatic logging to files. Any log events of level INFO or higher
  are saved to '/LOG_FILES/root_logger'. A new log file is created every time
  the program is started.

* Introduced autosave for the temperature history every 10 min. The temperature
  data is saved to '/LOG_FILES/temperature_log' and a new file is created every
  time the program is started.

New in v1.2.1:

* Added and adjusted time.sleep() calls between XeprAPI calls to prevent Xepr
  from crashing (recommended by Patrick Carl, Bruker Germany)

* Implemented universal timeout of 30 min for all CustomXepr methods: if no
  logging.status() message is released for 30 min while a job is active a
  warning email will be sent out. This is currently handled externally by the
  JobStatusApp.

New in v1.2.0:

* Timeout warning for Xepr scans, adjusted for expected measurement time

* Timeout warning for temperature stabilisation, adjusted for expected ramp

  time
* Implemented "Abort" functionality in all long running class methods
  (setTemperature, customtune, pause, runExperiment, etc.)

"""